CREATE TABLE users (
    user_id SERIAL PRIMARY KEY,
    username VARCHAR(50) NOT NULL UNIQUE,
    email VARCHAR(100) NOT NULL UNIQUE,
    password_hash VARCHAR(255) NOT NULL,
    date_joined DATE NOT NULL DEFAULT CURRENT_DATE, 
    profile_image VARCHAR(255)
);

CREATE TABLE goals (
    goal_id SERIAL PRIMARY KEY,
    user_id INT NOT NULL REFERENCES users(user_id) ON DELETE CASCADE,
    title VARCHAR(100) NOT NULL,
    description TEXT,
    start_date DATE NOT NULL,
    end_date DATE CHECK (end_date >= start_date),
    progress INT CHECK (progress >= 0 AND progress <= 100),
    status VARCHAR(20) NOT NULL CHECK (status IN ('in progress', 'completed', 'on hold'))
);

CREATE TABLE tasks (
    task_id SERIAL PRIMARY KEY,
    goal_id INT NOT NULL REFERENCES goals(goal_id) ON DELETE CASCADE,
    title VARCHAR(100) NOT NULL,
    description TEXT,
    due_date DATE CHECK (due_date >= CURRENT_DATE),
    priority VARCHAR(20) NOT NULL CHECK (priority IN ('low', 'medium', 'high')),
    status VARCHAR(20) NOT NULL CHECK (status IN ('pending', 'in progress', 'completed', 'planned')),
    completion_date DATE CHECK (completion_date >= due_date OR completion_date IS NULL)
);

CREATE INDEX idx_tasks_goal_id ON tasks (goal_id);
CREATE INDEX idx_goals_user_id ON goals (user_id);

INSERT INTO users (username, email, password_hash, date_joined, profile_image) VALUES
('alice', 'alice@example.com', 'hash_alice', '2025-01-15', '/images/alice.jpg'),
('bob', 'bob@example.com', 'hash_bob', '2025-02-10', '/images/bob.jpg'),
('charlie', 'charlie@example.com', 'hash_charlie', '2025-03-05', '/images/charlie.jpg'),
('david', 'david@example.com', 'hash_david', '2025-04-10', '/images/david.jpg'),
('emma', 'emma@example.com', 'hash_emma', '2025-05-12', '/images/emma.jpg'),
('fiona', 'fiona@example.com', 'hash_fiona', '2025-06-15', '/images/fiona.jpg'),
('george', 'george@example.com', 'hash_george', '2025-07-10', '/images/george.jpg'),
('hannah', 'hannah@example.com', 'hash_hannah', '2025-08-15', '/images/hannah.jpg'),
('ian', 'ian@example.com', 'hash_ian', '2025-09-05', '/images/ian.jpg'),
('julia', 'julia@example.com', 'hash_julia', '2025-10-01', '/images/julia.jpg'),
('kevin', 'kevin@example.com', 'hash_kevin', '2025-11-01', '/images/kevin.jpg'),
('linda', 'linda@example.com', 'hash_linda', '2025-11-05', '/images/linda.jpg'),
('michael', 'michael@example.com', 'hash_michael', '2025-11-10', '/images/michael.jpg'),
('nina', 'nina@example.com', 'hash_nina', '2025-11-15', '/images/nina.jpg'),
('oliver', 'oliver@example.com', 'hash_oliver', '2025-11-20', '/images/oliver.jpg'),
('paula', 'paula@example.com', 'hash_paula', '2025-11-25', '/images/paula.jpg'),
('quentin', 'quentin@example.com', 'hash_quentin', '2025-11-30', '/images/quentin.jpg');


INSERT INTO goals (user_id, title, description, start_date, end_date, progress, status) VALUES
(1, 'Get Fit', 'Improve physical fitness', '2025-01-20', '2025-06-20', 50, 'in progress'),
(1, 'Read More', 'Read 20 books', '2025-02-01', '2025-12-31', 40, 'in progress'),
(2, 'Learn Coding', 'Complete Python course', '2025-03-01', '2025-09-01', 70, 'in progress'),
(3, 'Travel', 'Visit 5 countries', '2025-05-15', '2025-11-15', 20, 'in progress'),
(4, 'Learn Cooking', 'Complete 10 recipes', '2025-05-01', '2025-08-01', 30, 'in progress'),
(5, 'Meditate Daily', 'Daily meditation for 3 months', '2025-06-01', '2025-09-01', 50, 'in progress'),
(6, 'Write a Novel', 'Complete first draft of novel', '2025-07-01', '2025-12-31', 20, 'in progress'),
(7, 'Complete Art Course', 'Finish 8 lessons in digital art', '2025-07-01', '2025-12-31', 40, 'in progress'),
(8, 'Learn Spanish', 'Complete Spanish basics course', '2025-08-01', '2026-01-31', 20, 'in progress'),
(9, 'Build a Portfolio', 'Develop a portfolio website', '2025-09-01', '2025-12-01', 50, 'in progress'),
(10, 'Run a Marathon', 'Train for and run a full marathon', '2025-10-01', '2026-04-01', 10, 'in progress'),
(11, 'Read 5 Books', 'Read 5 books by the end of the year', '2025-11-01', '2025-12-31', 0, 'in progress'),
(12, 'Learn to Cook', 'Try 15 new recipes', '2025-11-01', '2025-12-31', 10, 'in progress'),
(13, 'Daily Exercise', 'Exercise daily for 30 minutes', '2025-11-01', '2025-12-31', 20, 'in progress'),
(14, 'Meditation Practice', 'Meditate every day for 3 months', '2025-11-01', '2026-01-31', 15, 'in progress'),
(15, 'Learn Photography', 'Complete a photography course', '2025-11-01', '2026-01-31', 25, 'in progress'),
(16, 'Complete Art Portfolio', 'Prepare a complete portfolio', '2025-11-01', '2026-01-31', 40, 'in progress'),
(17, 'Develop Blog', 'Set up and write for a personal blog', '2025-11-01', '2026-01-31', 5, 'in progress');


INSERT INTO tasks (goal_id, title, description, due_date, priority, status, completion_date) VALUES
(1, 'Gym Session', 'Attend gym session', '2025-01-22', 'high', 'completed', '2025-01-22'),
(1, 'Morning Yoga', '30 min of morning yoga', '2025-01-23', 'medium', 'completed', '2025-01-23'),
(1, 'Cardio Workout', '20 min running', '2025-01-24', 'high', 'completed', '2025-01-24'),
(2, 'Finish Book 1', 'Complete reading Book 1', '2025-02-10', 'medium', 'completed', '2025-02-10'),
(2, 'Start Book 2', 'Begin reading Book 2', '2025-02-15', 'medium', 'in progress', NULL),
(2, 'Finish Book 2', 'Complete reading Book 2', '2025-03-01', 'medium', 'planned', NULL),
(3, 'Complete Module 1', 'Finish module 1 of coding course', '2025-03-10', 'high', 'completed', '2025-03-10'),
(3, 'Complete Module 2', 'Finish module 2 of coding course', '2025-03-20', 'high', 'completed', '2025-03-20'),
(3, 'Complete Module 3', 'Finish module 3 of coding course', '2025-04-01', 'high', 'completed', '2025-04-01'),
(1, 'Stretching', '15 min stretching exercises', '2025-04-02', 'medium', 'completed', '2025-04-02'),
(1, 'HIIT Workout', 'High-intensity interval training', '2025-04-05', 'high', 'completed', '2025-04-05'),
(1, 'Run 5K', 'Complete a 5K run', '2025-04-10', 'high', 'completed', '2025-04-10'),
(2, 'Finish Book 3', 'Complete reading Book 3', '2025-04-15', 'medium', 'in progress', NULL),
(2, 'Start Book 4', 'Begin reading Book 4', '2025-04-20', 'medium', 'planned', NULL),
(2, 'Finish Book 4', 'Complete reading Book 4', '2025-04-25', 'medium', 'planned', NULL),
(3, 'Complete Module 4', 'Finish module 4 of coding course', '2025-05-01', 'high', 'completed', '2025-05-01'),
(3, 'Complete Module 5', 'Finish module 5 of coding course', '2025-05-10', 'high', 'in progress', NULL),
(3, 'Complete Module 6', 'Finish module 6 of coding course', '2025-05-20', 'high', 'planned', NULL),
(4, 'Cook Recipe 1', 'Make pasta recipe', '2025-06-01', 'medium', 'completed', '2025-06-01'),
(4, 'Cook Recipe 2', 'Bake chocolate cake', '2025-06-05', 'medium', 'completed', '2025-06-05'),
(4, 'Cook Recipe 3', 'Make a smoothie bowl', '2025-06-10', 'medium', 'in progress', NULL),
(5, 'Morning Meditation', '15 min of meditation', '2025-06-15', 'low', 'completed', '2025-06-15'),
(5, 'Evening Meditation', '15 min of meditation', '2025-06-16', 'low', 'in progress', NULL),
(5, 'Weekend Meditation', '30 min meditation session', '2025-06-20', 'medium', 'planned', NULL),
(6, 'Write Chapter 1', 'Complete Chapter 1 of novel', '2025-07-15', 'high', 'completed', '2025-07-15'),
(6, 'Outline Chapter 2', 'Create outline for Chapter 2', '2025-07-20', 'medium', 'completed', '2025-07-20'),
(6, 'Write Chapter 2', 'Draft Chapter 2', '2025-07-25', 'high', 'in progress', NULL),
(6, 'Edit Chapter 1', 'Review and edit Chapter 1', '2025-08-01', 'high', 'planned', NULL),
(7, 'Watch Lesson 1', 'Complete first digital art lesson', '2025-07-10', 'medium', 'completed', '2025-07-10'),
(7, 'Practice Sketching', 'Practice sketches for 30 minutes', '2025-07-15', 'high', 'completed', '2025-07-15'),
(7, 'Watch Lesson 2', 'Complete second digital art lesson', '2025-07-20', 'medium', 'completed', '2025-07-20'),
(7, 'Create First Artwork', 'Draw and color a simple piece', '2025-07-25', 'high', 'in progress', NULL),
(7, 'Watch Lesson 3', 'Complete third digital art lesson', '2025-07-30', 'medium', 'planned', NULL),
(8, 'Learn Basic Greetings', 'Study Spanish greetings and phrases', '2025-08-05', 'low', 'completed', '2025-08-05'),
(8, 'Practice Pronunciation', 'Practice pronunciation for 15 minutes', '2025-08-10', 'medium', 'in progress', NULL),
(8, 'Learn Verb Conjugations', 'Study regular verb conjugations', '2025-08-15', 'high', 'planned', NULL),
(8, 'Practice Speaking', 'Have a 10-minute conversation', '2025-08-20', 'medium', 'planned', NULL),
(9, 'Design Wireframe', 'Create wireframe for homepage', '2025-09-10', 'high', 'completed', '2025-09-10'),
(9, 'Set Up Hosting', 'Set up website hosting service', '2025-09-15', 'high', 'completed', '2025-09-15'),
(9, 'Build Homepage', 'Code the homepage layout', '2025-09-20', 'medium', 'in progress', NULL),
(9, 'Create Contact Form', 'Add a contact form to homepage', '2025-09-25', 'medium', 'planned', NULL),
(9, 'Finalize Design', 'Refine design elements', '2025-10-01', 'high', 'planned', NULL),
(10, 'Run 5K', 'Run a 5K for endurance', '2025-10-10', 'high', 'completed', '2025-10-10'),
(10, 'Run 10K', 'Increase distance to 10K', '2025-10-20', 'high', 'in progress', NULL),
(10, 'Strength Training', 'Do strength training twice a week', '2025-10-25', 'medium', 'planned', NULL),
(10, 'Cross-Train', 'Cross-training for endurance', '2025-11-01', 'medium', 'planned', NULL),
(10, 'Run 15K', 'Increase distance to 15K', '2025-11-10', 'high', 'planned', NULL),
(7, 'Sketch New Style', 'Experiment with a new art style', '2025-11-15', 'medium', 'planned', NULL),
(7, 'Watch Advanced Tutorial', 'Complete an advanced art tutorial', '2025-12-01', 'high', 'planned', NULL),
(8, 'Watch Spanish Show', 'Watch a Spanish TV show with subtitles', '2025-12-05', 'low', 'planned', NULL),
(8, 'Practice Writing', 'Write a paragraph in Spanish', '2025-12-10', 'medium', 'planned', NULL),
(9, 'Portfolio Review', 'Get feedback on portfolio', '2025-11-15', 'medium', 'planned', NULL),
(10, 'Run Half Marathon', 'Complete a half marathon', '2025-12-20', 'high', 'planned', NULL),
(11, 'Read Book 1', 'Finish reading the first book', '2025-11-10', 'medium', 'completed', '2025-11-10'),
(11, 'Read Book 2', 'Start reading the second book', '2025-11-15', 'medium', 'completed', '2025-11-15'),
(11, 'Read Book 3', 'Finish the third book', '2025-11-20', 'medium', 'in progress', NULL),
(11, 'Read Book 4', 'Start the fourth book', '2025-11-25', 'medium', 'planned', NULL),
(11, 'Read Book 5', 'Finish reading the fifth book', '2025-11-30', 'medium', 'planned', NULL),
(12, 'Cook Recipe 1', 'Try making a new recipe', '2025-11-05', 'medium', 'completed', '2025-11-05'),
(12, 'Cook Recipe 2', 'Prepare a second recipe', '2025-11-10', 'medium', 'completed', '2025-11-10'),
(12, 'Cook Recipe 3', 'Attempt a third recipe', '2025-11-15', 'high', 'in progress', NULL),
(12, 'Cook Recipe 4', 'Make a dessert', '2025-11-20', 'medium', 'planned', NULL),
(12, 'Cook Recipe 5', 'Prepare a holiday meal', '2025-11-25', 'high', 'planned', NULL),
(13, 'Morning Run', 'Jog for 30 minutes', '2025-11-01', 'high', 'completed', '2025-11-01'),
(13, 'Yoga Session', '45 minutes of yoga', '2025-11-03', 'medium', 'completed', '2025-11-03'),
(13, 'Strength Training', 'Focus on upper body', '2025-11-05', 'high', 'completed', '2025-11-05'),
(13, 'Evening Walk', 'Walk in the evening for relaxation', '2025-11-07', 'low', 'completed', '2025-11-07'),
(13, 'Interval Training', 'Intensive workout session', '2025-11-09', 'high', 'completed', '2025-11-09'),
(14, 'Meditate 10 Minutes', 'Practice meditation', '2025-11-02', 'low', 'completed', '2025-11-02'),
(14, 'Meditate 15 Minutes', 'Extend meditation practice', '2025-11-04', 'low', 'completed', '2025-11-04'),
(14, 'Meditate 20 Minutes', 'Longer meditation session', '2025-11-06', 'low', 'completed', '2025-11-06'),
(14, 'Guided Meditation', 'Follow a guided meditation', '2025-11-08', 'medium', 'completed', '2025-11-08'),
(14, 'Meditate Outdoors', 'Practice meditation in nature', '2025-11-10', 'medium', 'completed', '2025-11-10'),
(15, 'Learn Camera Settings', 'Understand basic camera functions', '2025-11-05', 'high', 'completed', '2025-11-05'),
(15, 'Practice Lighting', 'Experiment with lighting techniques', '2025-11-10', 'medium', 'in progress', NULL),
(15, 'Photo Composition', 'Work on composition skills', '2025-11-15', 'medium', 'planned', NULL),
(15, 'Outdoor Photography', 'Take outdoor photographs', '2025-11-20', 'high', 'planned', NULL),
(15, 'Editing Techniques', 'Learn basic photo editing', '2025-11-25', 'medium', 'planned', NULL),
(16, 'Create Portfolio Layout', 'Design layout for portfolio', '2025-11-01', 'high', 'completed', '2025-11-01'),
(16, 'Select Artworks', 'Choose artworks for the portfolio', '2025-11-03', 'medium', 'completed', '2025-11-03'),
(16, 'Write Descriptions', 'Describe each artwork', '2025-11-05', 'medium', 'in progress', NULL),
(16, 'Portfolio Photoshoot', 'Capture high-quality images', '2025-11-07', 'high', 'planned', NULL),
(16, 'Finalize Layout', 'Make final adjustments', '2025-11-09', 'high', 'planned', NULL),
(17, 'Setup Blog Domain', 'Get a domain name', '2025-11-05', 'medium', 'completed', '2025-11-05'),
(17, 'Design Blog Theme', 'Design a custom blog theme', '2025-11-10', 'high', 'in progress', NULL),
(17, 'Write First Post', 'Write introductory post', '2025-11-12', 'medium', 'planned', NULL),
(17, 'SEO Optimization', 'Optimize for search engines', '2025-11-14', 'medium', 'planned', NULL),
(17, 'Plan Weekly Content', 'Create a content calendar', '2025-11-16', 'medium', 'planned', NULL),
(17, 'Share on Social Media', 'Promote the blog', '2025-11-18', 'medium', 'planned', NULL),
(13, 'HIIT Session', 'High-intensity interval training', '2025-11-11', 'high', 'completed', '2025-11-11'),
(13, 'Evening Walk 2', 'Evening walk for relaxation', '2025-11-13', 'low', 'completed', '2025-11-13'),
(14, 'Meditate 25 Minutes', 'Longer meditation session', '2025-11-12', 'medium', 'completed', '2025-11-12'),
(14, 'Mindfulness Exercise', 'Practice mindfulness', '2025-11-14', 'low', 'completed', '2025-11-14'),
(15, 'Learn Aperture Settings', 'Experiment with aperture', '2025-11-27', 'medium', 'planned', NULL),
(15, 'Night Photography', 'Take photos at night', '2025-11-29', 'high', 'planned', NULL),
(16, 'Add Artist Bio', 'Write an artist biography', '2025-11-12', 'medium', 'planned', NULL),
(16, 'Proof Portfolio', 'Check for errors', '2025-11-14', 'low', 'planned', NULL),
(17, 'Analyze Blog Traffic', 'Review site analytics', '2025-11-20', 'medium', 'planned', NULL),
(17, 'Email Subscribers', 'Send newsletter', '2025-11-25', 'medium', 'planned', NULL),
(11, 'Finish Book 6', 'Complete reading of sixth book', '2025-12-05', 'medium', 'planned', NULL),
(11, 'Finish Book 7', 'Complete reading of seventh book', '2025-12-15', 'medium', 'planned', NULL),
(11, 'Finish Book 8', 'Complete reading of eighth book', '2025-12-20', 'medium', 'planned', NULL),
(11, 'Complete Series', 'Finish the book series', '2025-12-31', 'high', 'planned', NULL),
(12, 'Cook Recipe 6', 'Try out a pasta recipe', '2025-11-30', 'medium', 'planned', NULL),
(12, 'Cook Recipe 7', 'Try baking a cake', '2025-12-05', 'high', 'planned', NULL),
(12, 'Cook Recipe 8', 'Prepare an international dish', '2025-12-10', 'medium', 'planned', NULL),
(12, 'Cook Recipe 9', 'Try a healthy recipe', '2025-12-15', 'low', 'planned', NULL),
(12, 'Cook Recipe 10', 'Prepare a festive meal', '2025-12-20', 'high', 'planned', NULL),
(13, 'Evening Stretching', 'Stretching session for flexibility', '2025-11-20', 'low', 'completed', '2025-11-20'),
(13, 'Strength Training 2', 'Strength training for lower body', '2025-11-22', 'high', 'completed', '2025-11-22'),
(13, 'Cardio Workout', 'Cardio session for endurance', '2025-11-25', 'high', 'completed', '2025-11-25'),
(13, 'Meditation', 'Meditate post-exercise', '2025-11-28', 'low', 'completed', '2025-11-28'),
(14, 'Breathing Exercise', 'Practice deep breathing', '2025-12-01', 'low', 'completed', '2025-12-01'),
(14, 'Mindfulness Walk', 'Take a mindful walk', '2025-12-03', 'low', 'planned', NULL),
(14, 'Gratitude Practice', 'Reflect on gratitude', '2025-12-05', 'low', 'planned', NULL),
(14, 'Extended Meditation', 'Meditate for 30 minutes', '2025-12-07', 'medium', 'planned', NULL),
(14, 'Journaling', 'Reflective journaling', '2025-12-10', 'medium', 'planned', NULL),
(15, 'Camera Angles', 'Experiment with camera angles', '2025-12-01', 'medium', 'planned', NULL),
(15, 'Low Light Photography', 'Practice in low light settings', '2025-12-05', 'high', 'planned', NULL),
(15, 'Editing Tools', 'Learn editing techniques', '2025-12-07', 'medium', 'planned', NULL),
(15, 'Outdoor Portraits', 'Take portraits in natural light', '2025-12-10', 'medium', 'planned', NULL),
(15, 'Portfolio Review', 'Review portfolio for improvements', '2025-12-15', 'high', 'planned', NULL),
(16, 'Social Media Profile', 'Set up art profile on social media', '2025-12-01', 'medium', 'planned', NULL),
(16, 'Art Submission', 'Submit artwork to gallery', '2025-12-05', 'high', 'planned', NULL),
(16, 'Art Feedback', 'Collect feedback on portfolio', '2025-12-10', 'medium', 'planned', NULL),
(16, 'New Art Styles', 'Experiment with new styles', '2025-12-12', 'high', 'planned', NULL),
(16, 'Finalize Portfolio', 'Final edits to portfolio', '2025-12-20', 'high', 'planned', NULL),
(17, 'Publish New Post', 'Publish a blog post', '2025-12-01', 'medium', 'completed', '2025-12-01'),
(17, 'Guest Post', 'Invite guest writer', '2025-12-05', 'medium', 'planned', NULL),
(17, 'Blog Optimization', 'Optimize site speed', '2025-12-10', 'high', 'planned', NULL),
(17, 'Analyze Keywords', 'Research SEO keywords', '2025-12-12', 'medium', 'planned', NULL),
(17, 'Schedule Content', 'Plan for upcoming months', '2025-12-20', 'medium', 'planned', NULL);
